<!--pages/admin/admin.wxml-->
<van-tabs active="{{ activeTab }}" custom-class="tabbar" swipeable="{{false}}" animated="{{true}}"
    bind:change="switchTab" z-index="0">
    <van-tab title="审批预约"></van-tab>
    <van-tab title="管理设备"></van-tab>
    <van-tab title="调整管理员"></van-tab>
</van-tabs>
<!-- 审批预约 -->

<!-- 管理设备 -->
<view wx:if="{{activeTab==1}}">
    <view class="small_title">
        <view class="text" style="width:100%;justify-content:center;color:#999999" bindtap="addequip"
            hover-class="haveselect">
            <view class="square" style='background-image:url(../../icon/add.png)' />
            <text decode="{{true}}">&nbsp;&nbsp;添加新的预约设备</text>
        </view>
        <view class="divline"></view>
    </view>
    <van-row custom-class="row" wx:for="{{item_list}}" wx:for-item="equip">
        <van-col span="4" offset="1">
            <view class="avatar" style='background-image:url({{equip.thumbnail}})'></view>
        </van-col>
        <van-col span="10" offset="2">
            <view class='server-name'>{{equip.name}}</view>
            <view class='server-description'>{{equip['brief-intro']}}</view>
        </van-col>
        <van-col span="4" offset="2">
            <button data-value="{{equip.id}}" type="primary" style="margin-top:8%" bindtap="modify" size="mini">修改</button>
            <button data-value="{{equip.id}}" class="warn" hover-class="warns" bindtap="del" size="mini">删除</button>
        </van-col>
    </van-row>
</view>
<!-- 调整管理员 -->
<view wx:if="{{activeTab==2}}">
    <view class="small_title">
        <view class="text">管理员申请</view>
        <view class="divline"></view>
    </view>
    <view class="total" style="flex-direction:row" wx:for="{{be_list}}">
        <view class="detail" style="width:70%;margin-left:3%">
            <view style="width:100%;flex-direction:row;display:flex;margin-top:3%">
                <view style="width:25%;text-align:center">姓名：</view>
                <view style="width:75%;text-align:right">{{item.requestor.name}}</view>
            </view>
            <view style="width:100%;flex-direction:row;display:flex;margin-top:3%">
                <view style="width:25%;text-align:center">班级：</view>
                <view style="width:75%;text-align:right">{{item.requestor.clazz}}</view>
            </view>
            <view style="width:100%;flex-direction:row;display:flex;margin-top:3%;margin-bottom:3%">
                <view style="width:25%;text-align:center">学号：</view>
                <view style="width:75%;text-align:right">{{item.requestor['school-id']}}</view>
            </view>
        </view>
        <view style="width:30%;display:flex;flex-direction:column;align-items:center">
            <button type="primary" size="mini" style="margin-bottom:5%" bindtap="approve"
                data-value="{{item.id}}">同意</button>
            <button class="warn" hover-class="warns" size="mini" style="margin-top:5%" bindtap="refuse" data-value="{{item.id}}">拒绝</button>
        </view>
    </view>
    <view style="font-weight:lighter;color:#999999;height:100rpx;text-align: center" wx:if="{{be_list.length==0}}">
        ——暂无申请信息——</view>
    <view class="small_title">
        <view class="text">管理员名单</view>
        <view class="divline"></view>
    </view>
    <view class="total" style="flex-direction:row" wx:for="{{admin_list}}">
        <view class="detail" style="width:70%;margin-left:3%">
            <view style="width:100%;flex-direction:row;display:flex;margin-top:3%">
                <view style="width:25%;text-align:center">姓名：</view>
                <view style="width:75%;text-align:right">{{item.requestor.name}}</view>
            </view>
            <view style="width:100%;flex-direction:row;display:flex;margin-top:3%">
                <view style="width:25%;text-align:center">班级：</view>
                <view style="width:75%;text-align:right">{{item.requestor.clazz}}</view>
            </view>
            <view style="width:100%;flex-direction:row;display:flex;margin-top:3%;margin-bottom:3%">
                <view style="width:25%;text-align:center">学号：</view>
                <view style="width:75%;text-align:right">{{item.requestor['school-id']}}</view>
            </view>
        </view>
        <view style="width:30%;display:flex;flex-direction:column;align-items:center">
            <button class="warn" hover-class="warns" size="mini" bindtap="fired"><text>解除\n权限</text></button>
        </view>
    </view>
    <view style="font-weight:lighter;color:#999999;height:100rpx;text-align: center" wx:if="{{admin_list.length==0}}">
        ——暂无管理员信息——</view>
</view>