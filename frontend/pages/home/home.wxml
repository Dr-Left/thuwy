<!--pages/home/home.wxml-->
<wxs module="Math">
    module.exports = {
        colcal: function (x, y) {
            if (y == 1)
                return 0
            else if (y == 0) {
                return 2
            }
            else {
                if (parseInt(x / 8) % 2 == 1)
                    return 3
                else {
                    if (parseInt(x / 16) % 2 == 1)
                        return 1
                    else
                        return 2
                }
            }
        },
        cal: function (x, y) {
            if (y == 0)
                return 1;
            else if (y == 1)
                return 0;
            else {
                if (parseInt(x / 8) % 2 == 1)
                    return 2
                else if (parseInt(x / 32) % 2 == 1)
                    return 4
                else
                    return 3
            }
        },
    }
</wxs>
<van-tabs active="{{ activeTab }}" custom-class="tabbar" swipeable="{{false}}" animated="{{true}}"
    bind:change="switchTab" z-index="0">
    <van-tab title="进行中"></van-tab>
    <van-tab title="审批中"></van-tab>
    <van-tab title="已驳回/已结束"></van-tab>
</van-tabs>
<!-- 显示记录 -->
<view class="total" wx:for="{{(activeTab==0)?success:((activeTab==1)?ongoing:history)}}" wx:for-item="equip" wx:key="id" style="background-image:url(../../../../icon/rsv.png);background-repeat:no-repeat; background-size:250rpx 250rpx" wx:if="{{equip.name!=''}}">
    <view class="detail">
        <view class="which">{{equip.name}}</view>
        <view class="pic{{Math.colcal(equip.state,activeTab)}}" hover-class="haspic{{Math.colcal(equip.state,activeTab)}}"
            style="text-align:center; width:30%; border-radius:20rpx" bindtap="showdetail" data-id="{{equip.id}}" data-name="{{equip.name}}">
            <text decode="{{true}}">{{colst[Math.colcal(equip.state,activeTab)]}}&nbsp;&nbsp;></text>
        </view>
    </view>
    <view class="divline"></view>
    <view class="detail">
        <view style="width:50%">预约编号：</view>
        <view style="width:50%;text-align:right">{{equip.id}}</view>
    </view>
    <!-- <view class="detail">
        <view style="width:50%">预约时间：</view>
        <view style="width:50%;text-align:right">{{equip.interval}}</view>
    </view>
    <view class="detail">
        <view style="width:50%">预约理由：</view>
        <view style="width:50%;text-align:right">{{equip.reason}}</view>
    </view> -->
    <view class="detail">
        <view style="width:50%">预约状态：</view>
        <view style="width:50%;text-align:right">{{st[Math.cal(equip.state,activeTab)]}}</view>
    </view>
</view>
<view style="font-weight:lighter;color:#999999;margin-top:50%;text-align: center" wx:if="{{success.length==0&&activeTab==0||ongoing.length==0&&activeTab==1||history.length==0&&activeTab==2}}">——暂无详细信息——</view>